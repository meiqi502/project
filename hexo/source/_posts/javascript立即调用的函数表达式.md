---
title: javascript立即调用的函数表达式
date: 2015-08-07 15:34:27
tags: javascript 函数表达式 函数声明
---
javascript中经常遇到这样的写法：
```
(function(){....})();
(function(){....}());
```
这叫立即调用的函数表达式，作用是立即执行该函数。立即调用的函数表达式有两种形式，介绍这两种形式之前先介绍一下函数声明和函数表达式；
- 函数声明
```
<script>
function() {
    alert("hello, world.");
};

function foo() {
    alert("hello, world.");
};
</script>
```
<!--more-->
- 函数表达式
```
<script>
var foo = function() {
    alert("hello, world.");
};
</script>
```
通过在函数表达式尾部添加一个括号就形成了一个立即调用的函数表达式。如下：
```
var foo = function() {
    alert("hello, world.");
}();
```
而仅仅在函数声明末尾添加括号无法形成立即调用的函数表达式。正确的写法就是再用一个括号括住整个函数声明，因为解析器会将()里面的function看作函数表达式，所以写法就是：
```
(function(){....})();
(function(){....}());
```
除了用括号括住函数声明这种写法之外，还有不少奇巧淫技，比如下面这种写法：
```
<script>
~function() {
    alert("hello, world.");
}();
</script>
```
这种写法也同样可以自动执行函数。原因是：从语法解析的角度看，Javascript不允许在函数声明的后面直接使用小括号，而函数表达式则没有这个限制，通过在函数声明前面加上一个『~』操作符，就可以让语法解析器把后面看成是函数表达式，同样的，在函数声明前面加上『!，+，-』等操作符也是可行的。但是显然用()的写法更加规范和易于理解。
